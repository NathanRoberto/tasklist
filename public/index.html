<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro/Login</title>
    <link rel="stylesheet" type="text/css"  href="/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div id="form-container">
        <!-- Formulário de Login -->
        <div id="login-form" class="style-form">
            <div class="content-form">
                <div class="conect-div">
                    <h2 class="title-secondary">Conecte-se</h2>
                    <span class="text-second">Informe os dados de sua conta</span>
                    <div style="text-align: start; margin-top: 50px;">
                        <form id="loginForm" class="div-form-1">
                            <label for="email">E-mail:</label>
                            <input placeholder="Coloque seu email" type="email" id="loginEmail" name="email" required>
                            <label for="password">Senha:</label>
                            <input placeholder="Coloque sua senha" type="password" id="loginPassword" name="password" required>
                            <button type="submit">Entrar</button>
                        </form>
                    </div>
                </div>
                <div class="y-count">
                    <p style="color: white;">Não tem conta? <a href="#" onclick="showRegisterForm()"
                            style="color: var(--cor-2);">Cadastre-se</a></p>
                </div>
            </div>
        </div>

        <!-- Formulário de Cadastro -->
        <div id="register-form" class="style-form" style="display: none;">
            <div class="content-form">
                <div class="conect-div">
                    <h2 class="title-secondary">Cadastre-se</h2>
                    <span class="text-second">Preencha para criar a conta.</span>
                    <form id="registerForm" class="div-form-2">
                        <label for="name">Nome:</label>
                        <input type="text" id="registerName" name="name" placeholder="Informe seu nome" required>
                        <label for="surname">Sobrenome:</label>
                        <input type="text" id="registerSurname" name="surname" placeholder="Informe seu sobrenome" required>
                        <label for="email">E-mail:</label>
                        <input type="email" id="registerEmail" name="email" placeholder="Informe seu email" required>
                        <label for="password">Senha:</label>
                        <input type="password" id="registerPassword" name="password" placeholder="Crie sua senha" required>
                        <label for="phone">Telefone:</label>
                        <input type="text" id="registerPhone" name="phone" placeholder="Informe seu telefone" required>
                        <button type="submit">Cadastrar</button>
                    </form>
                </div>
                <div class="y-count">
                    <p style="text-align: center; color: white;">Já tem uma conta? <a href="#"
                            style="color: var(--cor-2);" onclick="showLoginForm()">Conecte-se</a></p>
                </div>
            </div>
        </div>

        <!-- Página inicial -->
        <div id="main-page">
            <div id="content-logo">
                <img id="logo" src="image/LOGO.jpg" alt="Logo">
                <span id="slogan">Do planejamento à realização.</span>
            </div>
            <div id="content-main">
                <div id="commitment">
                    <div id="commitment-1" class="div-commitment">
                        <div class="content-commitment">
                            <h4>LISTAS</h4>
                            <div class="div-img" style="background-image: url('image/listas.jpg');"></div>
                            <div class="comment">Se organize com listas</div>
                        </div>
                    </div>
                    <div id="commitment-2" class="div-commitment">
                        <div class="content-commitment">
                            <h4>METAS</h4>
                            <div class="div-img" style="background-image: url(image/metas.jpg);"></div>
                            <div class="comment">Acompanhe seus objetivos</div>
                        </div>
                    </div>
                    <div id="commitment-3" class="div-commitment">
                        <div class="content-commitment">
                            <h4>PLANO DE ESTUDO</h4>
                            <div class="div-img" style="background-image: url(image/planoDeEstudos.jpg);"></div>
                            <div class="comment">Monitore seu avanço</div>
                        </div>
                    </div>
                    <div id="commitment-4" class="div-commitment">
                        <div class="content-commitment">
                            <h4>COMPROMISSOS</h4>
                            <div class="div-img" style="background-image: url(image/compromissos.jpg);"></div>
                            <div class="comment">Não perca reuniões</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

</body>
<script src="/scripts.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.getElementById('loginForm').addEventListener('submit', async function (event) {
        event.preventDefault();

        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;

        try {
            const response = await fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });

            const result = await response.json();

            if (response.ok) {
                window.location.href = '/usuario';
            } else {
                alert(result.message);
            }
        } catch (error) {
            console.error('Erro ao tentar fazer login:', error);
            alert('Erro ao tentar fazer login');
        }
    });
</script>

</html>